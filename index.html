<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador de Fichas RPG</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <link rel="stylesheet" href="./style.css">
    <!-- Removido o bloco <style> que forçava full screen -->
</head>
<body class="overflow-hidden dark"> <!-- Inicia com o tema escuro por padrão -->
    <!-- Splash Screen -->
    <div id="splash-screen" class="splash-screen fixed inset-0 flex items-center justify-center">
        <div class="flex flex-col items-center justify-center">
            <i class="fas fa-dice-d20 text-8xl text-white animate-spin"></i>
            <p class="mt-4 text-xl font-bold text-white tracking-widest animate-pulse">CARREGANDO...</p>
        </div>
    </div>

    <!-- *** NOVO: Container para Alertas no Topo *** -->
    <div id="top-alert-container" class="fixed top-0 left-1/2 -translate-x-1/2 z-[1000000000000] p-4 space-y-2 pointer-events-none max-w-md">
        <!-- Alertas serão adicionados aqui via JS -->
    </div>

    <!-- New Desktop Sidebar -->
    <aside id="desktop-sidebar" class="hidden md:flex flex-col fixed top-0 left-0 h-screen w-64 z-40 shadow-lg">
        <div class="p-5 text-2xl font-bold border-b border-gray-700/50 flex items-center gap-3">
            <i class="fas fa-dice-d20 text-indigo-400"></i>
            <span>Farland 1.0</span>
        </div>
        <div class="flex flex-col gap-2 p-4 flex-grow">
            <button class="desktop-nav-button" data-target="personagem-em-jogo" title="Personagem em Jogo">
                <i class="fas fa-theater-masks"></i><span>Em Jogo</span>
            </button>
            <button class="desktop-nav-button" data-target="personagem" title="Personagens">
                <i class="fas fa-users"></i><span>Personagens</span>
            </button>
            <button class="desktop-nav-button" data-target="ataques" title="Ataques">
                <i class="fas fa-khanda"></i><span>Ataques</span>
            </button>
            <button class="desktop-nav-button" data-target="magias" title="Magias">
                <i class="fas fa-magic"></i><span>Magias</span>
            </button>
            <button class="desktop-nav-button" data-target="habilidades" title="Habilidades">
                <i class="fas fa-fist-raised"></i><span>Habilidades</span>
            </button>
            <button class="desktop-nav-button" data-target="itens" title="Itens">
                <i class="fas fa-box"></i><span>Itens</span>
            </button>
             <button class="desktop-nav-button" data-target="categorias" title="Categorias">
                <i class="fas fa-tags"></i><span>Categorias</span>
            </button>
            <button class="desktop-nav-button" data-target="grimorio" title="Grimório">
                <i class="fas fa-book-open"></i><span>Grimório</span>
            </button>
        </div>
        <div class="p-2 border-t border-gray-700/50 flex justify-around items-center">
            <button id="export-db-btn" class="desktop-action-button" title="Exportar Banco de Dados">
                <i class="fas fa-file-download"></i>
            </button>
            <button id="import-db-btn" class="desktop-action-button" title="Importar Banco de Dados">
                <i class="fas fa-file-upload"></i>
            </button>
            <button id="export-images-btn" class="desktop-action-button" title="Baixar Imagens">
                <i class="fas fa-file-image"></i>
            </button>
            <button id="aspect-ratio-btn" class="desktop-action-button" title="Ajustar Tamanho dos Cards">
                <i class="fas fa-expand-alt"></i>
            </button>
        </div>
    </aside>

     <!-- Sliding Actions Sidebar for Mobile -->
    <div id="actions-sidebar" class="fixed top-1/2 -translate-y-1/2 z-50 flex items-center md:hidden">
        <button id="sidebar-toggle" class="w-3 h-16 rounded-l-lg flex items-center justify-center shadow-lg">
            <i class="fas fa-chevron-left"></i>
        </button>
        <div id="sidebar-buttons" class="flex flex-col gap-3 p-2 rounded-l-lg shadow-lg">
            <button id="export-db-btn-mobile" class="sidebar-btn w-8 h-8 rounded-full font-bold flex items-center justify-center shadow-lg transform hover:scale-105 transition-transform" title="Exportar Banco de Dados">
                <i class="fas fa-file-download"></i>
            </button>
            <button id="import-db-btn-mobile" class="sidebar-btn w-8 h-8 rounded-full font-bold flex items-center justify-center shadow-lg transform hover:scale-105 transition-transform" title="Importar Banco de Dados">
                <i class="fas fa-file-upload"></i>
            </button>
             <button id="export-images-btn-mobile" class="sidebar-btn w-8 h-8 rounded-full font-bold flex items-center justify-center shadow-lg transform hover:scale-105 transition-transform" title="Baixar Imagens">
                <i class="fas fa-file-image"></i>
            </button>
        </div>

    </div>

     <!-- Sliding Actions Sidebar for Mobile -->
    <div id="actions-sidebar-1" class="fixed top-1/2 -translate-y-1/2 z-50 flex items-center md:hidden">
        <div id="sidebar-buttons" class="flex flex-col gap-3 p-2 rounded-r-lg shadow-lg">
            <button id="aspect-ratio-btn-mobile" class="sidebar-btn w-8 h-8 rounded-full font-bold flex items-center justify-center shadow-lg transform hover:scale-105 transition-transform" title="Ajustar Tamanho dos Cards">
                <i class="fas fa-expand-alt"></i>
            </button>

            <!-- <button id="theme-switcher-mobile" class="sidebar-btn w-8 h-8 rounded-full font-bold flex items-center justify-center shadow-lg transform hover:scale-105 transition-transform" title="Alterar Tema">
                <i class="fas fa-moon"></i>
            </button> -->
            <hr>
            <button  class=" sidebar-btn w-8 h-8 rounded-full font-bold flex items-center justify-center shadow-lg transform hover:scale-105 transition-transform" title="Exportar Banco de Dados"  data-target="grimorio" title="Grimório">
               <i class="fas fa-book-open"></i>
            </button>
            <button class="sidebar-btn w-8 h-8 rounded-full font-bold flex items-center justify-center shadow-lg transform hover:scale-105 transition-transform" data-target="categorias" title="Categorias">
                <i class="fas fa-tags"></i>
            </button>
        </div>
        <button id="sidebar-toggle-1" class="w-3 h-16 rounded-r-lg flex items-center justify-center shadow-lg">
            <i class="fas fa-chevron-left"></i>
        </button>
    </div>

    <!-- Main Content -->
    <div id="main-content" class="main-content flex-grow w-full">
        <main class="w-full h-full flex-grow rounded-2xl shadow-2xl flex flex-col items-center overflow-hidden" style="border-radius: 1rem;">
            <div id="content-display" class="w-full h-full flex flex-col items-center overflow-y-auto">
                <!-- Conteúdo dinâmico será injetado aqui pelo JavaScript -->
            </div>
        </main>
    </div>

    <!-- Container da Ficha de Personagem -->
    <div id="character-sheet-container" class="hidden"></div>
    <!-- Container da Ficha de Magia/Habilidade -->
    <div id="spell-sheet-container" class="hidden"></div>
    <!-- Container da Ficha de Item -->
    <div id="item-sheet-container" class="hidden"></div>
    <!-- Container da Ficha de Ataque -->
    <div id="attack-sheet-container" class="hidden"></div>
    <!-- Contêiner para fichas aninhadas (ex: relacionamentos) -->
    <div id="nested-sheet-container" class="hidden"></div>
    <!-- Container do Editor de Grimório -->
    <div id="grimoire-editor-container" class="hidden"></div>

    <!-- Formulário de Criação de Personagem -->
    <div id="creation-section" class="hidden">
        <div class="form-container" style="max-width: 1000px;">
            <div class="flex justify-between items-center mb-4 border-b border-gray-700 pb-2">
                <h2 id="form-title" class="text-2xl font-bold text-indigo-300">Novo Personagem</h2>
                <button id="close-form-btn" class="text-gray-400 hover:text-white text-3xl font-bold">&times;</button>
            </div>
            <form id="cardForm" class="space-y-3">
                <div class="flex flex-col md:flex-row gap-4">
                    <!-- Coluna Esquerda: Imagens -->
                    <div class="w-full md:w-1/5 flex flex-col gap-3">
                         <div class="text-center bg-gray-900/50 p-3 rounded-lg border border-gray-700">
                             <label for="characterImageUpload" class="block text-xs font-bold text-indigo-300 uppercase mb-2 cursor-pointer hover:text-white transition-colors">
                                <i class="fas fa-camera mr-1"></i> Avatar
                            </label>
                             <div class="relative group cursor-pointer">
                                 <input type="file" id="characterImageUpload" accept="image/*" class="hidden">
                                 <img id="characterImagePreview" class="mx-auto w-24 h-24 object-cover rounded-full border-4 border-indigo-900/50 group-hover:border-indigo-500 transition-colors hidden" onclick="document.getElementById('characterImageUpload').click()">
                                 <div id="characterImagePlaceholder" class="mx-auto w-24 h-24 rounded-full border-2 border-dashed border-gray-600 flex items-center justify-center text-gray-500 group-hover:border-indigo-500 group-hover:text-indigo-400 transition-colors" onclick="document.getElementById('characterImageUpload').click()">
                                     <i class="fas fa-user text-3xl"></i>
                                 </div>
                             </div>
                         </div>
                         <div class="text-center bg-gray-900/50 p-3 rounded-lg border border-gray-700">
                             <label for="backgroundImageUpload" class="block text-xs font-bold text-indigo-300 uppercase mb-2 cursor-pointer hover:text-white transition-colors">
                                 <i class="fas fa-image mr-1"></i> Fundo
                             </label>
                             <div class="relative group cursor-pointer">
                                 <input type="file" id="backgroundImageUpload" accept="image/*" class="hidden">
                                 <div id="backgroundImagePreview" class="mx-auto w-full h-16 rounded border-2 border-dashed border-gray-600 bg-cover bg-center group-hover:border-indigo-500 transition-colors" onclick="document.getElementById('backgroundImageUpload').click()"></div>
                             </div>
                         </div>
                    </div>

                    <!-- Coluna Direita: Dados -->
                    <div class="w-full md:w-4/5 space-y-3">
                        <!-- Linha 1: Info Básica -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                            <div>
                                <label for="cardTitle" class="block text-xs font-semibold text-gray-400 mb-1">Nome</label>
                                <input type="text" id="cardTitle" placeholder="Ex: Guerreiro" required class="w-full px-3 py-1.5 bg-gray-700 text-white text-sm rounded border border-gray-600 focus:border-indigo-500 focus:outline-none">
                            </div>
                            <div>
                                <label for="cardSubTitle" class="block text-xs font-semibold text-gray-400 mb-1">Raça e Classe</label>
                                <input type="text" id="cardSubTitle" placeholder="Ex: Humano Mago" required class="w-full px-3 py-1.5 bg-gray-700 text-white text-sm rounded border border-gray-600 focus:border-indigo-500 focus:outline-none">
                            </div>
                        </div>
                        
                        <!-- Linha 2: Nível e $ -->
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                            <div>
                                <label for="cardLevel" class="block text-xs font-semibold text-gray-400 mb-1">Nível</label>
                                <input type="number" id="cardLevel" placeholder="1" required class="w-full px-3 py-1.5 bg-gray-700 text-white text-sm rounded border border-gray-600 focus:border-indigo-500 focus:outline-none">
                            </div>
                            <div>
                                <label for="dinheiro" class="block text-xs font-semibold text-gray-400 mb-1">Dinheiro</label>
                                <input type="number" id="dinheiro" placeholder="0" class="w-full px-3 py-1.5 bg-gray-700 text-white text-sm rounded border border-gray-600 focus:border-indigo-500 focus:outline-none">
                            </div>
                        </div>

                         <!-- Atributos -->
                        <div class="bg-gray-800/50 p-2 rounded border border-gray-700/50">
                            <h3 class="text-xs font-bold text-indigo-400 uppercase mb-2">Atributos</h3>
                            <div class="grid grid-cols-3 md:grid-cols-6 gap-2">
                                <div><label class="block text-[10px] text-gray-500 text-center uppercase">AGI</label><input type="number" id="agilidade" placeholder="0" class="w-full text-center px-1 py-1 bg-gray-700 text-white text-sm rounded border border-gray-600"></div>
                                <div><label class="block text-[10px] text-gray-500 text-center uppercase">CAR</label><input type="number" id="carisma" placeholder="0" class="w-full text-center px-1 py-1 bg-gray-700 text-white text-sm rounded border border-gray-600"></div>
                                <div><label class="block text-[10px] text-gray-500 text-center uppercase">FOR</label><input type="number" id="forca" placeholder="0" class="w-full text-center px-1 py-1 bg-gray-700 text-white text-sm rounded border border-gray-600"></div>
                                <div><label class="block text-[10px] text-gray-500 text-center uppercase">INT</label><input type="number" id="inteligencia" placeholder="0" class="w-full text-center px-1 py-1 bg-gray-700 text-white text-sm rounded border border-gray-600"></div>
                                <div><label class="block text-[10px] text-gray-500 text-center uppercase">SAB</label><input type="number" id="sabedoria" placeholder="0" class="w-full text-center px-1 py-1 bg-gray-700 text-white text-sm rounded border border-gray-600"></div>
                                <div><label class="block text-[10px] text-gray-500 text-center uppercase">VIG</label><input type="number" id="vigor" placeholder="0" class="w-full text-center px-1 py-1 bg-gray-700 text-white text-sm rounded border border-gray-600"></div>
                            </div>
                        </div>

                        <!-- Combate -->
                        <div class="bg-gray-800/50 p-2 rounded border border-gray-700/50">
                            <h3 class="text-xs font-bold text-red-400 uppercase mb-2">Combate</h3>
                            <div class="grid grid-cols-4 md:grid-cols-8 gap-2">
                                <div><label class="block text-[10px] text-gray-500 text-center truncate">PV Máx</label><input type="number" id="vida" placeholder="0" class="w-full text-center px-1 py-1 bg-gray-700 text-white text-sm rounded border border-gray-600"></div>
                                <div><label class="block text-[10px] text-gray-500 text-center truncate">PV Atual</label><input type="number" id="vidaAtual" placeholder="0" class="w-full text-center px-1 py-1 bg-gray-700 text-white text-sm rounded border border-gray-600"></div>
                                <div><label class="block text-[10px] text-gray-500 text-center truncate">PM Máx</label><input type="number" id="mana" placeholder="0" class="w-full text-center px-1 py-1 bg-gray-700 text-white text-sm rounded border border-gray-600"></div>
                                <div><label class="block text-[10px] text-gray-500 text-center truncate">PM Atual</label><input type="number" id="manaAtual" placeholder="0" class="w-full text-center px-1 py-1 bg-gray-700 text-white text-sm rounded border border-gray-600"></div>
                                <div><label class="block text-[10px] text-gray-500 text-center truncate">Armadura</label><input type="number" id="armadura" placeholder="0" class="w-full text-center px-1 py-1 bg-gray-700 text-white text-sm rounded border border-gray-600"></div>
                                <div><label class="block text-[10px] text-gray-500 text-center truncate">Esquiva</label><input type="number" id="esquiva" placeholder="0" class="w-full text-center px-1 py-1 bg-gray-700 text-white text-sm rounded border border-gray-600"></div>
                                <div><label class="block text-[10px] text-gray-500 text-center truncate">Bloqueio</label><input type="number" id="bloqueio" placeholder="0" class="w-full text-center px-1 py-1 bg-gray-700 text-white text-sm rounded border border-gray-600"></div>
                                <div><label class="block text-[10px] text-gray-500 text-center truncate">Desloc.</label><input type="number" id="deslocamento" placeholder="0" class="w-full text-center px-1 py-1 bg-gray-700 text-white text-sm rounded border border-gray-600"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Textareas (Compact) -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                    <div>
                        <label for="historia" class="block text-xs font-semibold text-gray-400 mb-1">História</label>
                        <textarea id="historia" rows="3" class="w-full px-3 py-1.5 bg-gray-700 text-white text-sm rounded border border-gray-600 focus:border-indigo-500 focus:outline-none"></textarea>
                    </div>
                    <div>
                        <label for="personalidade" class="block text-xs font-semibold text-gray-400 mb-1">Personalidade</label>
                        <textarea id="personalidade" rows="3" class="w-full px-3 py-1.5 bg-gray-700 text-white text-sm rounded border border-gray-600 focus:border-indigo-500 focus:outline-none"></textarea>
                    </div>
                    <div>
                        <label for="motivacao" class="block text-xs font-semibold text-gray-400 mb-1">Motivação</label>
                        <textarea id="motivacao" rows="3" class="w-full px-3 py-1.5 bg-gray-700 text-white text-sm rounded border border-gray-600 focus:border-indigo-500 focus:outline-none"></textarea>
                    </div>
                </div>

                <!-- Seções Expansíveis/Listas -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <!-- Perícias -->
                    <div class="bg-gray-800/30 p-2 rounded">
                         <div class="flex justify-between items-center mb-1">
                            <h3 class="text-xs font-bold text-indigo-300 uppercase">Perícias</h3>
                            <button type="button" id="show-add-pericia-form-btn" class="text-indigo-400 hover:text-indigo-200 text-xs font-bold">+ Nova</button>
                        </div>
                        <div id="add-pericia-form" class="hidden bg-gray-900 p-2 rounded mb-2 border border-gray-700">
                             <!-- Form Pericia Compacto -->
                             <input type="text" id="new-pericia-name" placeholder="Nome" class="w-full mb-1 px-2 py-1 bg-gray-800 text-xs rounded border border-gray-600">
                             <div class="flex gap-1">
                                <select id="new-pericia-attribute" class="flex-1 px-2 py-1 bg-gray-800 text-xs rounded border border-gray-600">
                                    <option value="AGILIDADE">AGI</option><option value="CARISMA">CAR</option><option value="FORÇA">FOR</option>
                                    <option value="INTELIGÊNCIA">INT</option><option value="SABEDORIA">SAB</option><option value="VIGOR">VIG</option>
                                </select>
                                <button type="button" id="add-new-pericia-btn" class="bg-indigo-600 text-white px-3 rounded text-xs">OK</button>
                                <button type="button" id="cancel-add-pericia-btn" class="bg-gray-600 text-white px-2 rounded text-xs">X</button>
                             </div>
                             <input type="text" id="new-pericia-description" placeholder="Desc." class="w-full mt-1 px-2 py-1 bg-gray-800 text-xs rounded border border-gray-600">
                        </div>
                        <div id="pericias-checkboxes-container" class="space-y-1 max-h-32 overflow-y-auto"></div>
                        <div id="pericia-description-display" class="mt-2 p-2 rounded bg-gray-700 hidden text-xs">
                            <h4 id="periciaDescriptionTitle" class="font-bold text-indigo-200"></h4>
                            <p id="periciaDescriptionText" class="text-gray-300"></p>
                        </div>
                    </div>

                    <!-- Inventário -->
                    <div id="form-inventory-section" class="bg-gray-800/30 p-2 rounded hidden">
                         <div class="flex justify-between items-center mb-1">
                            <h3 class="text-xs font-bold text-amber-300 uppercase">Inventário</h3>
                            <button type="button" id="add-item-to-inventory-btn" class="text-amber-400 hover:text-amber-200 text-xs font-bold flex items-center gap-1"><i class="fas fa-plus"></i> Item</button>
                        </div>
                        <p id="slots-info" class="text-[10px] text-gray-400 text-center mb-1">Força: 0 | Carga: 0/5</p>
                        <div class="space-y-2 max-h-32 overflow-y-auto custom-scrollbar">
                             <div>
                                <h4 class="text-[10px] font-semibold text-gray-500 uppercase">Equip. (Slots)</h4>
                                <div id="special-equipment-container" class="grid grid-cols-6 gap-1"></div>
                            </div>
                            <div>
                                <h4 class="text-[10px] font-semibold text-gray-500 uppercase">Carga</h4>
                                <div id="item-slots-container" class="grid grid-cols-6 gap-1"></div>
                            </div>
                             <div>
                                <h4 class="text-[10px] font-semibold text-gray-500 uppercase">Sem Carga</h4>
                                <div id="zero-charge-items-container" class="grid grid-cols-6 gap-1"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Listas Vinculadas -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-3 pt-2">
                    <div>
                         <div class="flex justify-between items-center mb-1">
                            <h3 class="text-xs font-bold text-teal-300 uppercase">Magias/Hab.</h3>
                            <button type="button" id="add-magic-to-char-btn" class="text-teal-400 hover:text-teal-200 text-xs font-bold"><i class="fas fa-plus"></i></button>
                        </div>
                        <div id="selected-magics-container" class="bg-gray-800/50 p-2 rounded min-h-[40px] max-h-[100px] overflow-y-auto"></div>
                    </div>
                    <div>
                         <div class="flex justify-between items-center mb-1">
                            <h3 class="text-xs font-bold text-red-400 uppercase">Ataques</h3>
                            <button type="button" id="add-attack-to-char-btn" class="text-red-400 hover:text-red-200 text-xs font-bold"><i class="fas fa-plus"></i></button>
                        </div>
                        <div id="selected-attacks-container" class="bg-gray-800/50 p-2 rounded min-h-[40px] max-h-[100px] overflow-y-auto"></div>
                    </div>
                    <div>
                         <div class="flex justify-between items-center mb-1">
                            <h3 class="text-xs font-bold text-purple-400 uppercase">Relações</h3>
                            <button type="button" id="add-relationship-btn" class="text-purple-400 hover:text-purple-200 text-xs font-bold"><i class="fas fa-plus"></i></button>
                        </div>
                        <div id="selected-relationships-container" class="bg-gray-800/50 p-2 rounded min-h-[40px] max-h-[100px] overflow-y-auto"></div>
                    </div>
                </div>

                <div class="pt-2">
                    <button type="submit" id="submitButton" class="w-full py-2 px-4 rounded-full text-base font-bold text-white bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 shadow-lg btn-gradient-pulse">
                        Criar Cartão
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Formulário de Criação de Magia/Habilidade -->
    <div id="spell-creation-section" class="hidden">
        <div class="form-container" style="max-width: 1000px;">
            <div class="flex justify-between items-center mb-4 border-b border-gray-700 pb-2">
                <h2 id="spell-form-title" class="text-2xl font-bold text-teal-300">Nova Magia</h2>
                <button id="close-spell-form-btn" class="text-gray-400 hover:text-white text-3xl font-bold">&times;</button>
            </div>
            <form id="spellForm" class="space-y-3">
                 <div class="flex flex-col md:flex-row gap-4">
                    <!-- Coluna Esq: Imagem -->
                    <div class="w-full md:w-1/5 flex flex-col items-center gap-2 bg-gray-900/50 p-3 rounded-lg border border-gray-700 h-fit">
                        <label for="spellImageUpload" class="block text-xs font-bold text-teal-300 uppercase cursor-pointer hover:text-white">Ícone</label>
                        <div class="relative group cursor-pointer w-24 h-24">
                            <input type="file" id="spellImageUpload" accept="image/*" class="hidden">
                             <img id="spellImagePreview" class="w-full h-full object-cover rounded-full border-4 border-teal-900/50 group-hover:border-teal-500 transition-colors hidden" onclick="document.getElementById('spellImageUpload').click()">
                             <div id="spellImagePlaceholder" class="w-full h-full rounded-full border-2 border-dashed border-gray-600 flex items-center justify-center text-gray-500 group-hover:border-teal-500 group-hover:text-teal-400 transition-colors" onclick="document.getElementById('spellImageUpload').click()">
                                 <i class="fas fa-magic text-3xl"></i>
                             </div>
                        </div>
                    </div>

                    <!-- Coluna Dir: Dados -->
                    <div class="w-full md:w-4/5 space-y-3">
                         <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                            <div class="md:col-span-2">
                                <label for="spellName" class="block text-xs font-semibold text-gray-400 mb-1">Nome</label>
                                <input type="text" id="spellName" placeholder="Ex: Bola de Fogo" required class="w-full px-3 py-1.5 bg-gray-700 text-white text-sm rounded border border-gray-600 focus:border-teal-500 focus:outline-none">
                            </div>
                            <div>
                                <label for="spell-category-select" class="block text-xs font-semibold text-gray-400 mb-1">Categoria</label>
                                <select id="spell-category-select" class="w-full px-3 py-1.5 bg-gray-700 text-white text-sm rounded border border-gray-600 focus:border-teal-500 focus:outline-none"></select>
                            </div>
                        </div>

                        <div>
                            <label for="spellCharacterOwner" class="block text-xs font-semibold text-gray-400 mb-1">Dono (Opcional)</label>
                            <select id="spellCharacterOwner" class="w-full px-3 py-1.5 bg-gray-700 text-white text-sm rounded border border-gray-600 focus:border-teal-500 focus:outline-none"></select>
                        </div>

                        <!-- Stats Grid Compacto -->
                        <div class="bg-gray-800/50 p-2 rounded border border-gray-700/50 grid grid-cols-2 md:grid-cols-4 gap-3">
                             <div id="mana-cost-wrapper" class="contents">
                                 <div>
                                    <label for="spellCircle" class="block text-[10px] text-gray-500 uppercase mb-1">Círculo</label>
                                    <input type="number" id="spellCircle" placeholder="1" class="w-full px-2 py-1 bg-gray-700 text-white text-sm rounded border border-gray-600">
                                </div>
                                 <div>
                                    <label for="spellManaCost" class="block text-[10px] text-gray-500 uppercase mb-1">Custo Mana</label>
                                    <input type="number" id="spellManaCost" placeholder="0" class="w-full px-2 py-1 bg-gray-700 text-white text-sm rounded border border-gray-600">
                                </div>
                            </div>
                            <div>
                                <label for="spellExecution" class="block text-[10px] text-gray-500 uppercase mb-1">Execução</label>
                                <input type="text" id="spellExecution" placeholder="padrão" class="w-full px-2 py-1 bg-gray-700 text-white text-sm rounded border border-gray-600">
                            </div>
                            <div>
                                <label for="spellRange" class="block text-[10px] text-gray-500 uppercase mb-1">Alcance</label>
                                <input type="text" id="spellRange" placeholder="toque" class="w-full px-2 py-1 bg-gray-700 text-white text-sm rounded border border-gray-600">
                            </div>
                            <div>
                                <label for="spellTarget" class="block text-[10px] text-gray-500 uppercase mb-1">Alvo</label>
                                <input type="text" id="spellTarget" placeholder="1 ser" class="w-full px-2 py-1 bg-gray-700 text-white text-sm rounded border border-gray-600">
                            </div>
                             <div>
                                <label for="spellDuration" class="block text-[10px] text-gray-500 uppercase mb-1">Duração</label>
                                <input type="text" id="spellDuration" placeholder="instantânea" class="w-full px-2 py-1 bg-gray-700 text-white text-sm rounded border border-gray-600">
                            </div>
                            <div class="md:col-span-2">
                                <label for="spellResistencia" class="block text-[10px] text-gray-500 uppercase mb-1">Resistência</label>
                                <input type="text" id="spellResistencia" placeholder="nenhuma" class="w-full px-2 py-1 bg-gray-700 text-white text-sm rounded border border-gray-600">
                            </div>
                        </div>
                    </div>
                 </div>

                 <!-- Textareas Grid -->
                 <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                    <div class="md:col-span-2">
                        <label for="spellDescription" class="block text-xs font-semibold text-gray-400 mb-1">Descrição</label>
                        <textarea id="spellDescription" rows="3" class="w-full px-3 py-1.5 bg-gray-700 text-white text-sm rounded border border-gray-600 focus:border-teal-500 focus:outline-none"></textarea>
                    </div>
                    <div id="enhance-wrapper">
                        <label for="spellEnhance" class="block text-xs font-semibold text-gray-400 mb-1">Aprimoramento</label>
                        <textarea id="spellEnhance" rows="2" class="w-full px-3 py-1.5 bg-gray-700 text-white text-sm rounded border border-gray-600 focus:border-teal-500 focus:outline-none"></textarea>
                    </div>
                    <div id="true-wrapper">
                        <label for="spellTrue" class="block text-xs font-semibold text-gray-400 mb-1">Verdadeiro</label>
                        <textarea id="spellTrue" rows="2" class="w-full px-3 py-1.5 bg-gray-700 text-white text-sm rounded border border-gray-600 focus:border-teal-500 focus:outline-none"></textarea>
                    </div>
                 </div>

                 <!-- Aumentos Compacto -->
                <div class="bg-gray-800/30 p-2 rounded border border-gray-700/50">
                    <h3 class="text-xs font-bold text-teal-300 uppercase mb-2">Aumentos de Atributo</h3>
                    <div class="flex flex-wrap gap-2 items-end mb-2">
                         <div class="flex-grow min-w-[120px]">
                             <select id="spell-aumento-select" class="w-full px-2 py-1 bg-gray-800 text-white text-sm rounded border border-gray-600"></select>
                         </div>
                         <div class="w-20">
                             <input type="number" id="spell-aumento-value" placeholder="Valor" class="w-full px-2 py-1 bg-gray-800 text-white text-sm rounded border border-gray-600">
                         </div>
                         <div class="flex items-center gap-2 text-xs text-gray-300">
                             <label><input type="radio" name="spell-aumento-type" value="fixo" checked> Fixo</label>
                             <label><input type="radio" name="spell-aumento-type" value="temporario"> Temp.</label>
                         </div>
                         <button type="button" id="add-spell-aumento-btn" class="bg-teal-600 text-white px-3 py-1 rounded text-xs font-bold hover:bg-teal-500">Add</button>
                    </div>
                    <div id="spell-aumentos-list" class="flex flex-wrap gap-2"></div>
                </div>

                <div class="pt-2">
                    <button type="submit" id="spellSubmitButton" class="w-full py-2 px-4 rounded-full text-base font-bold text-white bg-gradient-to-r from-teal-500 to-cyan-600 hover:from-teal-600 hover:to-cyan-700 shadow-lg">
                        Salvar
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Formulário de Criação de Item -->
    <div id="item-creation-section" class="hidden">
        <div class="form-container" style="max-width: 1000px;">
            <div class="flex justify-between items-center mb-4 border-b border-gray-700 pb-2">
                <h2 id="item-form-title" class="text-2xl font-bold text-amber-300">Novo Item</h2>
                <button id="close-item-form-btn" class="text-gray-400 hover:text-white text-3xl font-bold">&times;</button>
            </div>
            <form id="itemForm" class="space-y-3">
                 <div class="flex flex-col md:flex-row gap-4">
                     <!-- Coluna Esq: Imagem -->
                    <div class="w-full md:w-1/5 flex flex-col items-center gap-2 bg-gray-900/50 p-3 rounded-lg border border-gray-700 h-fit">
                        <label for="itemImageUpload" class="block text-xs font-bold text-amber-300 uppercase cursor-pointer hover:text-white">Ícone</label>
                        <div class="relative group cursor-pointer w-24 h-24">
                             <input type="file" id="itemImageUpload" accept="image/*" class="hidden">
                             <img id="itemImagePreview" class="w-full h-full object-cover rounded-full border-4 border-amber-900/50 group-hover:border-amber-500 transition-colors hidden" onclick="document.getElementById('itemImageUpload').click()">
                             <div id="itemImagePlaceholder" class="w-full h-full rounded-full border-2 border-dashed border-gray-600 flex items-center justify-center text-gray-500 group-hover:border-amber-500 group-hover:text-amber-400 transition-colors" onclick="document.getElementById('itemImageUpload').click()">
                                 <i class="fas fa-box text-3xl"></i>
                             </div>
                        </div>
                    </div>

                    <!-- Coluna Dir: Dados -->
                     <div class="w-full md:w-4/5 space-y-3">
                         <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                            <div class="md:col-span-2">
                                <label for="itemName" class="block text-xs font-semibold text-gray-400 mb-1">Nome</label>
                                <input type="text" id="itemName" placeholder="Ex: Espada Longa" required class="w-full px-3 py-1.5 bg-gray-700 text-white text-sm rounded border border-gray-600 focus:border-amber-500 focus:outline-none">
                            </div>
                            <div>
                                <label for="item-category-select" class="block text-xs font-semibold text-gray-400 mb-1">Categoria</label>
                                <select id="item-category-select" class="w-full px-3 py-1.5 bg-gray-700 text-white text-sm rounded border border-gray-600 focus:border-amber-500 focus:outline-none"></select>
                            </div>
                        </div>
                        <div>
                            <label for="itemCharacterOwner" class="block text-xs font-semibold text-gray-400 mb-1">Dono (Opcional)</label>
                            <select id="itemCharacterOwner" class="w-full px-3 py-1.5 bg-gray-700 text-white text-sm rounded border border-gray-600 focus:border-amber-500 focus:outline-none"></select>
                        </div>
                        
                        <div class="bg-gray-800/50 p-2 rounded border border-gray-700/50 grid grid-cols-2 md:grid-cols-4 gap-3">
                            <div>
                                <label for="itemType" class="block text-[10px] text-gray-500 uppercase mb-1">Tipo</label>
                                <input type="text" id="itemType" placeholder="Ex: Arma" class="w-full px-2 py-1 bg-gray-700 text-white text-sm rounded border border-gray-600">
                            </div>
                            <div>
                                <label for="itemDamage" class="block text-[10px] text-gray-500 uppercase mb-1">Dano</label>
                                <input type="text" id="itemDamage" placeholder="1d8" class="w-full px-2 py-1 bg-gray-700 text-white text-sm rounded border border-gray-600">
                            </div>
                             <div>
                                <label for="itemCharge" class="block text-[10px] text-gray-500 uppercase mb-1">Carga</label>
                                <input type="number" id="itemCharge" placeholder="1" class="w-full px-2 py-1 bg-gray-700 text-white text-sm rounded border border-gray-600">
                            </div>
                            <div>
                                <label for="itemPrerequisite" class="block text-[10px] text-gray-500 uppercase mb-1">Pré-req.</label>
                                <input type="text" id="itemPrerequisite" placeholder="FOR 1" class="w-full px-2 py-1 bg-gray-700 text-white text-sm rounded border border-gray-600">
                            </div>
                        </div>

                        <div><label for="itemDescription" class="block text-xs font-semibold mb-1 text-gray-400">Descrição</label><textarea id="itemDescription" rows="3" placeholder="Descrição do item..." class="w-full px-3 py-1.5 bg-gray-700 text-white rounded border border-gray-600 text-sm focus:border-amber-500 focus:outline-none"></textarea></div>
                     </div>
                 </div>

                  <!-- Aumentos Compacto -->
                <div class="bg-gray-800/30 p-2 rounded border border-gray-700/50">
                    <h3 class="text-xs font-bold text-amber-300 uppercase mb-2">Aumentos de Atributo</h3>
                    <div class="flex flex-wrap gap-2 items-end mb-2">
                         <div class="flex-grow min-w-[120px]">
                             <select id="item-aumento-select" class="w-full px-2 py-1 bg-gray-800 text-white text-sm rounded border border-gray-600"></select>
                         </div>
                         <div class="w-20">
                             <input type="number" id="item-aumento-value" placeholder="Valor" class="w-full px-2 py-1 bg-gray-800 text-white text-sm rounded border border-gray-600">
                         </div>
                         <div class="flex items-center gap-2 text-xs text-gray-300">
                             <label><input type="radio" name="item-aumento-type" value="fixo" checked> Fixo</label>
                             <label><input type="radio" name="item-aumento-type" value="temporario"> Temp.</label>
                         </div>
                         <button type="button" id="add-item-aumento-btn" class="bg-amber-600 text-white px-3 py-1 rounded text-xs font-bold hover:bg-amber-500">Add</button>
                    </div>
                    <div id="item-aumentos-list" class="flex flex-wrap gap-2"></div>
                </div>

                <div class="pt-2">
                    <button type="submit" id="itemSubmitButton" class="w-full py-2 px-4 rounded-full text-base font-bold text-white bg-gradient-to-r from-amber-500 to-orange-600 hover:from-amber-600 hover:to-orange-700 shadow-lg">
                        Salvar Item
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Formulário de Criação de Ataque -->
    <div id="attack-creation-section" class="hidden">
        <div class="form-container" style="max-width: 1000px;">
            <div class="flex justify-between items-center mb-4 border-b border-gray-700 pb-2">
                <h2 id="attack-form-title" class="text-2xl font-bold text-red-400">Novo Ataque</h2>
                <button id="close-attack-form-btn" class="text-gray-400 hover:text-white text-3xl font-bold">&times;</button>
            </div>
            <form id="attackForm" class="space-y-3">
                 <div class="flex flex-col md:flex-row gap-4">
                    <!-- Coluna Esq: Imagem -->
                    <div class="w-full md:w-1/5 flex flex-col items-center gap-2 bg-gray-900/50 p-3 rounded-lg border border-gray-700 h-fit">
                        <label for="attackImageUpload" class="block text-xs font-bold text-red-400 uppercase cursor-pointer hover:text-white">Ícone</label>
                        <div class="relative group cursor-pointer w-24 h-24">
                            <input type="file" id="attackImageUpload" accept="image/*" class="hidden">
                             <img id="attackImagePreview" class="w-full h-full object-cover rounded-full border-4 border-red-900/50 group-hover:border-red-500 transition-colors hidden" onclick="document.getElementById('attackImageUpload').click()">
                             <div id="attackImagePlaceholder" class="w-full h-full rounded-full border-2 border-dashed border-gray-600 flex items-center justify-center text-gray-500 group-hover:border-red-500 group-hover:text-red-400 transition-colors" onclick="document.getElementById('attackImageUpload').click()">
                                 <i class="fas fa-fist-raised text-3xl"></i>
                             </div>
                        </div>
                    </div>

                    <!-- Coluna Dir: Dados -->
                    <div class="w-full md:w-4/5 space-y-3">
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                            <div class="md:col-span-2">
                                <label for="attackName" class="block text-xs font-semibold text-gray-400 mb-1">Nome</label>
                                <input type="text" id="attackName" placeholder="Ex: Golpe Poderoso" required class="w-full px-3 py-1.5 bg-gray-700 text-white text-sm rounded border border-gray-600 focus:border-red-500 focus:outline-none">
                            </div>
                            <div>
                                <label for="attack-category-select" class="block text-xs font-semibold text-gray-400 mb-1">Categoria</label>
                                <select id="attack-category-select" class="w-full px-3 py-1.5 bg-gray-700 text-white text-sm rounded border border-gray-600 focus:border-red-500 focus:outline-none"></select>
                            </div>
                        </div>

                        <div>
                            <label for="attackCharacterOwner" class="block text-xs font-semibold text-gray-400 mb-1">Personagem</label>
                            <select id="attackCharacterOwner" class="w-full px-3 py-1.5 bg-gray-700 text-white text-sm rounded border border-gray-600 focus:border-red-500 focus:outline-none"></select>
                        </div>
                        <div>
                            <label for="attackDescription" class="block text-xs font-semibold text-gray-400 mb-1">Descrição</label>
                            <textarea id="attackDescription" rows="4" placeholder="Descrição do ataque..." class="w-full px-3 py-1.5 bg-gray-700 text-white text-sm rounded border border-gray-600 focus:border-red-500 focus:outline-none"></textarea>
                        </div>
                    </div>
                </div>

                <div class="pt-2">
                    <button type="submit" id="attackSubmitButton" class="w-full py-2 px-4 rounded-full text-base font-bold text-white bg-gradient-to-r from-red-500 to-rose-600 hover:from-red-600 hover:to-rose-700 shadow-lg">
                        Salvar Ataque
                    </button>
                </div>
            </form>
        </div>
    </div>


    <!-- Modal de Seleção de Personagem -->
    <div id="select-character-modal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center hidden z-50 p-4" style="z-index: 1000000000000000000;">
        <div class="bg-gray-800 text-white rounded-lg shadow-2xl p-6 w-full max-w-sm border border-gray-700">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold text-indigo-300">Selecionar Personagem</h3>
                <button id="select-character-close-btn" class="text-gray-400 hover:text-white text-3xl font-bold">&times;</button>
            </div>
            <div id="select-character-list" class="space-y-2 max-h-80 overflow-y-auto"></div>
        </div>
    </div>

    <!-- Generic Selection Modal -->
    <div id="selection-modal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center hidden z-[11000000000000000000000000000] p-4">
        <div class="bg-gray-800 text-white rounded-lg shadow-2xl p-6 w-full max-w-lg border border-gray-700 flex flex-col max-h-[90vh]">
            <div class="flex justify-between items-center mb-4">
                <h3 id="selection-modal-title" class="text-xl font-bold">Selecionar</h3>
                <button id="selection-modal-close-btn" class="text-gray-400 hover:text-white text-3xl font-bold">&times;</button>
            </div>
            <div id="selection-modal-list" class="space-y-2 overflow-y-auto"></div>
        </div>
    </div>

    <!-- Stat Editor Modal -->
    <div id="stat-editor-modal" class="fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center hidden z-[1200000000000000000000] p-4 transition-opacity duration-300">
        <div id="stat-editor-content" class="bg-gray-900/70 border-2 border-gray-700 text-white rounded-2xl shadow-2xl p-6 w-full max-w-sm transform transition-all duration-300 scale-95 opacity-0">
            <div class="flex justify-between items-center mb-6">
                <h3 id="stat-editor-title" class="text-2xl font-bold flex items-center gap-3">
                    <i id="stat-editor-icon" class="fas fa-edit"></i>
                    <span id="stat-editor-title-text">Editar Valor</span>
                </h3>
                <button id="stat-editor-close-btn" class="text-gray-400 hover:text-white text-2xl w-8 h-8 rounded-full hover:bg-gray-700 flex items-center justify-center transition-colors">&times;</button>
            </div>
            <div class="space-y-6">
                <div id="stat-editor-temp-container" class="hidden">
                    <label for="stat-editor-temp-value" class="block text-sm font-semibold mb-2 text-cyan-300">Pontos Temporários</label>
                    <input type="number" id="stat-editor-temp-value" class="w-full text-center text-xl px-4 py-2 bg-gray-800 text-cyan-300 rounded-lg border-2 border-cyan-600" readonly>
                </div>
                <div>
                    <label for="stat-editor-value" class="block text-sm font-semibold mb-2 text-gray-300">Valor a Adicionar ou Subtrair</label>
                    <input type="number" id="stat-editor-value" placeholder="0" class="w-full text-center text-2xl px-4 py-3 bg-gray-800 text-white rounded-lg border-2 border-gray-600 focus:border-indigo-500 focus:ring focus:ring-indigo-500/50 transition-all duration-300">
                </div>
                <!-- MODIFICAÇÃO: Adicionado botão de relógio -->
                <div class="flex justify-center gap-4">
                    <button id="stat-editor-subtract-btn" class="w-16 h-16 rounded-full bg-gradient-to-br from-red-500 to-red-700 hover:from-red-600 hover:to-red-800 text-white font-bold text-3xl flex items-center justify-center shadow-lg transform hover:scale-105 transition-transform" title="Subtrair Permanente">
                        <i class="fas fa-minus"></i>
                    </button>
                    <button id="stat-editor-add-btn" class="w-16 h-16 rounded-full bg-gradient-to-br from-green-500 to-green-700 hover:from-green-600 hover:to-green-800 text-white font-bold text-3xl flex items-center justify-center shadow-lg transform hover:scale-105 transition-transform" title="Adicionar Permanente">
                        <i class="fas fa-plus"></i>
                    </button>
                    <button id="stat-editor-add-temp-btn" class="w-16 h-16 rounded-full bg-gradient-to-br from-blue-500 to-blue-700 hover:from-blue-600 hover:to-blue-800 text-white font-bold text-2xl flex items-center justify-center shadow-lg transform hover:scale-105 transition-transform" title="Adicionar/Remover Temporário">
                        <i class="fas fa-clock"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Aspect Ratio Modal -->
    <div id="aspect-ratio-modal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center hidden z-[120000000000000000000] p-4">
        <div class="bg-gray-800 text-white rounded-lg shadow-2xl p-6 w-full max-w-sm border border-gray-700">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold text-indigo-300">Ajustar Proporção dos Cards</h3>
                <button id="aspect-ratio-close-btn" class="text-gray-400 hover:text-white text-3xl font-bold">&times;</button>
            </div>
            <div class="space-y-4">
                <p class="text-sm text-gray-400">Selecione uma proporção pré-definida ou insira uma personalizada (ex: 16x9).</p>
                <div id="aspect-ratio-options" class="grid grid-cols-2 gap-2">
                    <button class="aspect-ratio-option py-2 px-4 rounded-lg bg-gray-700 hover:bg-indigo-600" data-aspect="1.6">16:10 (Padrão)</button>
                    <button class="aspect-ratio-option py-2 px-4 rounded-lg bg-gray-700 hover:bg-indigo-600" data-aspect="1.3333">4:3 (Clássico)</button>
                    <button class="aspect-ratio-option py-2 px-4 rounded-lg bg-gray-700 hover:bg-indigo-600" data-aspect="1">1:1 (Quadrado)</button>
                    <button class="aspect-ratio-option py-2 px-4 rounded-lg bg-gray-700 hover:bg-indigo-600" data-aspect="0.5625">9:16 (Story)</button>
                </div>
                <div>
                    <label for="custom-aspect-ratio" class="block text-sm font-semibold mb-1">Proporção Personalizada:</label>
                    <input type="text" id="custom-aspect-ratio" placeholder="Ex: 16x9" class="w-full px-4 py-2 bg-gray-900 text-white rounded-lg border border-gray-600">
                </div>
                <button id="save-aspect-ratio-btn" class="w-full py-2 rounded-lg bg-indigo-600 hover:bg-indigo-700 font-bold">Salvar</button>
            </div>
        </div>
    </div>

    <!-- Hidden file input for DB import -->
    <input type="file" id="import-db-input" accept=".json" class="hidden">

    <!-- Mobile Bottom Navigation Menu -->
    <nav class="fixed bottom-0 left-0 right-0 backdrop-blur-sm p-2 flex justify-around items-center z-50 shadow-lg md:hidden" style="width: 100%; padding: .75rem">
        <button class="nav-button px-4 py-2 text-sm font-semibold rounded-full focus:outline-none flex items-center gap-2" data-target="personagem-em-jogo" title="Personagem em Jogo">
            <i class="fas fa-theater-masks"></i>
        </button>
        <button class="nav-button px-4 py-2 text-sm font-semibold rounded-full focus:outline-none flex items-center gap-2" data-target="personagem" title="Personagens">
            <i class="fas fa-users"></i>
        </button>
        <button class="nav-button px-4 py-2 text-sm font-semibold rounded-full focus:outline-none flex items-center gap-2" data-target="ataques" title="Ataques">
            <i class="fas fa-khanda"></i>
        </button>
        <button class="nav-button px-4 py-2 text-sm font-semibold rounded-full focus:outline-none flex items-center gap-2" data-target="magias" title="Magias">
            <i class="fas fa-magic"></i>
        </button>
        <button class="nav-button px-4 py-2 text-sm font-semibold rounded-full focus:outline-none flex items-center gap-2" data-target="habilidades" title="Habilidades">
            <i class="fas fa-fist-raised"></i>
        </button>
        <button class="nav-button px-4 py-2 text-sm font-semibold rounded-full focus:outline-none flex items-center gap-2" data-target="itens" title="Itens">
            <i class="fas fa-box"></i>
        </button>
    </nav>

    <script src="./splash_screen.js"></script>
    <script type="module" src="./local_db.js"></script>
    <script type="module" src="./settings_manager.js"></script>
    <script type="module" src="./ui_utils.js"></script>
    <script type="module" src="./category_manager.js"></script>
    <script type="module" src="./card-renderer.js"></script>
    <script type="module" src="./character_manager.js"></script>
    <script type="module" src="./magic_renderer.js"></script>
    <script type="module" src="./magic_manager.js"></script>
    <script type="module" src="./item_renderer.js"></script>
    <script type="module" src="./item_manager.js"></script>
    <script type="module" src="./attack_renderer.js"></script>
    <script type="module" src="./attack_manager.js"></script>
    <script type="module" src="./theme_manager.js"></script>
    <script type="module" src="./sidebar_manager.js"></script>
    <script type="module" src="./grimoire_manager.js"></script>
    <script type="module" src="./navigation_manager.js"></script>

    <script>
         function myFunction() {
            var popup = document.getElementById("myPopup");
            popup.classList.toggle("show");
        }
    </script>
</body>
</html>